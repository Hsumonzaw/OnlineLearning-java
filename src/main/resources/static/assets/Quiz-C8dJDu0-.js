import{_ as C,j as z,a,w as l,e as O,o as V,f as L,d as i,p as d,q as b,g as p,h as u,F as T,k as F,B as U,t as o,D as Q,m as k,u as M,s as D,v as H,x as A,A as S}from"./index-53ut1aa4.js";import{s as $}from"./UserAccountService-6cOQmFSE.js";import{s as E}from"./LanguageService-C8OwBagN.js";import{s as g}from"./QuizService-C7pySIqU.js";import{V as I}from"./VDialog-0H5vlJ4f.js";import{V as x}from"./VAutocomplete-CoJCvEhZ.js";import{V as N}from"./VTooltip-CbVseJnK.js";import{V as P}from"./VTable-CZhqfiFM.js";import{V as B}from"./VDatePicker-BhS8khmY.js";import{V as c}from"./VTextField-C3sPCMKT.js";import{f as m}from"./format-CBpsKyOP.js";import"./filter-yAUY_7Fd.js";import"./VInput-DLSwO6jY.js";import"./VSelectionControl-nb06iGDz.js";import"./VChip-CK8SP7y-.js";const j={data:()=>({selectedOne:{},saveOrupdate:"SAVE",userList:[],quiz:{},receivedPicker:new Date,receivedMenu:!1,userType:[],languageList:[],quizList:[],dialogDelete:!1,showForm:!1,showTeacher:!1,userData:{},type:"ALL"}),props:{},mounted:function(){this.userData=JSON.parse(localStorage.getItem("user")),this.userListMethod(),this.languageListMethod(),this.quizListMethod(),this.showForm=!1,this.languageListMethodByType()},methods:{languageListMethodByType(){g.getQuizList().then(s=>{this.type==="ALL"?this.quizList=s:this.quizList=s.filter(t=>{var h;return((h=t.languages)==null?void 0:h.languagesId)===this.type.languagesId})}).catch(s=>console.error("Fetch error:",s))},userListMethod(){$.getUserList(this.userType).then(s=>{this.userList.splice(0),this.userList.push(...s),this.quiz.userAccount=this.userList[0]}).catch(s=>{this.$swal("Fail!",s.response.data.message,"error")})},languageListMethod(){E.getLanguageList().then(s=>{this.languageList=s.map(t=>({...t,displayName:t.name||t.languageName||t.languagesName||"Unknown"})),this.languageList.length>0&&(this.quiz.languages=this.languageList[0])}).catch(s=>console.error("Fetch error:",s))},quizListMethod(){g.getQuizList().then(s=>{this.quizList.splice(0),this.quizList.push(...s)}).catch(s=>console.error("Fetch error:",s))},saveQuiz(){var t,h,f,y;const s={date:m(this.receivedPicker,"yyyy-MM-dd HH:mm:ss"),modifiedDate:m(new Date,"yyyy-MM-dd HH:mm:ss"),userAccount:{userAccountId:this.userData.userId},languages:{languagesId:((t=this.quiz.languages)==null?void 0:t.languagesId)||((h=this.languageList[0])==null?void 0:h.languagesId)},name:this.quiz.name,ansone:this.quiz.ansone,anstwo:this.quiz.anstwo,ansthree:this.quiz.ansthree,correct:this.quiz.correct};if(this.saveOrupdate==="SAVE")this.quiz.userAccountId=this.userData.userId,g.addQuizList(s).then(()=>{this.$swal("Success","Quiz saved successfully!","success"),this.quizListMethod(),this.showForm=!1}).catch(r=>{var e;return console.error("Save error:",((e=r.response)==null?void 0:e.data)||r)});else{const r={quizId:this.quiz.quizId,date:m(this.receivedPicker,"yyyy-MM-dd HH:mm:ss"),modifiedDate:m(new Date,"yyyy-MM-dd HH:mm:ss"),userAccount:{userAccountId:this.userData.userId},languages:{languagesId:((f=this.quiz.languages)==null?void 0:f.languagesId)||((y=this.languageList[0])==null?void 0:y.languagesId)},name:this.quiz.name,ansone:this.quiz.ansone,anstwo:this.quiz.anstwo,ansthree:this.quiz.ansthree,correct:this.quiz.correct};this.quiz.userAccountId=this.userData.userId,g.updateQuiz(r).then(()=>{this.$swal("Success","Quiz updated successfully!","success"),this.quizListMethod(),this.showForm=!1,this.saveOrupdate="SAVE",this.quiz={quizId:0},this.quizListMethod()}).catch(e=>{var n;return console.error("Update error:",((n=e.response)==null?void 0:n.data)||e)})}},clickEdit(s){this.showForm=!0,this.quiz={...s},this.saveOrupdate="UPDATE"},clickDelete(s){this.selectedOne={...s},this.dialogDelete=!0},clickDeleteDialog(){g.deleteQuiz(this.selectedOne).then(s=>{this.dialogDelete=!1,this.languageListMethodByType(),this.$swal({icon:"success",title:"Your work has been deleted",showConfirmButton:!1,timer:1e3}),this.quizListMethod()}).catch(s=>{this.$swal("Fail!",s.response.data.message,"error")})},resetForm(){this.quiz={date:m(this.receivedPicker,"yyyy-MM-dd HH:mm:ss"),modifiedDate:m(new Date,"yyyy-MM-dd HH:mm:ss"),userAccount:this.userList[0],languages:this.languageList[0],name:this.quiz.name,ansone:this.quiz.ansone,anstwo:this.quiz.anstwo,ansthree:this.quiz.ansthree,correct:this.quiz.correct},this.showForm=!1,this.saveOrupdate="SAVE"}},watch:{receivedPicker(){this.receivedMenu=!1,this.quiz.date=m(this.receivedPicker,"yyyy-MM-dd HH:mm:ss")},showForm(s){s||(this.quiz={},this.saveOrupdate="SAVE")}},components:{}},J=["onClick"],R={class:"text-center"},Y={class:"text-center"},G={class:"text-center"},K={class:"text-center"},W={class:"text-center"},X={class:"text-center"},Z={class:"text-center"},_={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},se={class:"text-center"};function ae(s,t,h,f,y,r){return V(),z("div",null,[a(O,{class:"title"},{default:l(()=>[a(L,{cols:"12"},{default:l(()=>[t[22]||(t[22]=i("h2",{style:{"background-color":"rgb(136, 210, 230)","text-align":"center"}},"Quiz",-1)),a(L,{cols:"2",class:"pl-1 pt-2"},{default:l(()=>[a(x,{modelValue:s.type,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.type=e),r.languageListMethodByType],items:s.languageList,"item-title":"displayName","item-value":"languagesId",label:"Please Select The Languages","return-object":"",density:"compact",variant:"outlined",required:"",small:"",filled:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),a(N,{location:"top"},{activator:l(({props:e})=>[a(d,b(e,{icon:"",color:"blue",class:"fab-button",onClick:t[1]||(t[1]=n=>s.showForm=!0)}),{default:l(()=>[a(p,{size:"36",color:"white"},{default:l(()=>t[17]||(t[17]=[u("mdi-plus")])),_:1,__:[17]})]),_:2},1040)]),default:l(()=>[t[18]||(t[18]=i("span",null,"Add Quiz",-1))]),_:1,__:[18]}),a(P,{"fixed-header":"",height:"92vh"},{default:l(()=>[t[21]||(t[21]=i("thead",null,[i("tr",null,[i("th",{class:"text-center white--text bg-primary"},"No."),i("th",{class:"text-center white--text bg-primary"},"Language Name"),i("th",{class:"text-center white--text bg-primary"},"Teacher Name"),i("th",{class:"text-center white--text bg-primary"},"Questions"),i("th",{class:"text-center white--text bg-primary"},"Option One"),i("th",{class:"text-center white--text bg-primary"},"Option Two"),i("th",{class:"text-center white--text bg-primary"},"Option Three"),i("th",{class:"text-center white--text bg-primary"},"Correct Answer"),i("th",{class:"text-center white--text bg-primary"},"Date"),i("th",{class:"text-center white--text bg-primary"},"Modified Date"),i("th",{class:"text-center white--text bg-primary"},"Action")])],-1)),i("tbody",null,[(V(!0),z(T,null,F(s.quizList,(e,n)=>{var q,w;return V(),z("tr",{key:n,onClick:v=>s.selectedOne=e,style:U({backgroundColor:e.quizId==s.selectedOne.quizId?"#def3ff":"transparent"})},[i("td",R,o(n+1),1),i("td",Y,o((q=e.languages)==null?void 0:q.name),1),i("td",G,o((w=e.userAccount)==null?void 0:w.name),1),i("td",K,o(e==null?void 0:e.name),1),i("td",W,o(e==null?void 0:e.ansone),1),i("td",X,o(e==null?void 0:e.anstwo),1),i("td",Z,o(e==null?void 0:e.ansthree),1),i("td",_,o(e==null?void 0:e.correct),1),i("td",ee,o(e==null?void 0:e.date),1),i("td",te,o(e==null?void 0:e.modifiedDate),1),i("td",se,[a(d,{class:"ml-1",small:"",icon:"",color:"green",density:"compact"},{default:l(()=>[a(p,{size:"small",onClick:v=>r.clickEdit(e)},{default:l(()=>t[19]||(t[19]=[u("mdi-pencil")])),_:2,__:[19]},1032,["onClick"])]),_:2},1024),a(d,{class:"ml-1",small:"",icon:"",color:"red",density:"compact"},{default:l(()=>[a(p,{size:"small",onClick:v=>r.clickDelete(e)},{default:l(()=>t[20]||(t[20]=[u("mdi-delete")])),_:2,__:[20]},1032,["onClick"])]),_:2},1024)])],12,J)}),128)),a(Q)])]),_:1,__:[21]})]),_:1,__:[22]})]),_:1}),a(I,{modelValue:s.showForm,"onUpdate:modelValue":t[13]||(t[13]=e=>s.showForm=e),"max-width":"500"},{default:l(()=>[a(k,{class:"form pa-4",elevation:"4"},{default:l(()=>[a(M,{class:"d-flex justify-space-between align-center"},{default:l(()=>[t[24]||(t[24]=i("span",{class:"text-h4"},"Add Quiz",-1)),a(d,{icon:"",color:"red",onClick:t[2]||(t[2]=e=>s.showForm=!1)},{default:l(()=>[a(p,null,{default:l(()=>t[23]||(t[23]=[u("mdi-close")])),_:1,__:[23]})]),_:1})]),_:1,__:[24]}),a(D,null,{default:l(()=>[a(H,{modelValue:s.receivedMenu,"onUpdate:modelValue":t[5]||(t[5]=e=>s.receivedMenu=e),"full-width":"","max-width":"290px","min-width":"290px","close-on-content-click":!1},{activator:l(({props:e})=>[a(c,b({modelValue:s.quiz.date,"onUpdate:modelValue":t[3]||(t[3]=n=>s.quiz.date=n),label:"Date",readonly:""},e,{density:"compact",variant:"outlined"}),null,16,["modelValue"])]),default:l(()=>[a(B,{modelValue:s.receivedPicker,"onUpdate:modelValue":t[4]||(t[4]=e=>s.receivedPicker=e),color:"primary","hide-header":"",max:new Date},null,8,["modelValue","max"])]),_:1},8,["modelValue"]),a(x,{modelValue:s.quiz.languages,"onUpdate:modelValue":t[6]||(t[6]=e=>s.quiz.languages=e),items:s.languageList,"item-text":"name","item-title":"name","item-value":"languagesId",label:"Language Name","return-object":"",density:"compact",variant:"outlined",rules:[e=>!!e||"Language is required"]},null,8,["modelValue","items","rules"]),a(c,{label:"Question",modelValue:s.quiz.name,"onUpdate:modelValue":t[7]||(t[7]=e=>s.quiz.name=e),modelModifiers:{number:!0},rules:[e=>!!e||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"]),a(c,{label:"Option One",modelValue:s.quiz.ansone,"onUpdate:modelValue":t[8]||(t[8]=e=>s.quiz.ansone=e),modelModifiers:{number:!0},rules:[e=>!!e||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"]),a(c,{label:"Option Two",modelValue:s.quiz.anstwo,"onUpdate:modelValue":t[9]||(t[9]=e=>s.quiz.anstwo=e),modelModifiers:{number:!0},rules:[e=>!!e||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"]),a(c,{label:"Option Three",modelValue:s.quiz.ansthree,"onUpdate:modelValue":t[10]||(t[10]=e=>s.quiz.ansthree=e),modelModifiers:{number:!0},rules:[e=>!!e||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"]),a(c,{label:"Correct Answer",modelValue:s.quiz.correct,"onUpdate:modelValue":t[11]||(t[11]=e=>s.quiz.correct=e),modelModifiers:{number:!0},rules:[e=>!!e||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),a(A,{class:"justify-end pr-5"},{default:l(()=>[a(d,{class:"text-black",style:{"background-color":"#2196f3"},onClick:t[12]||(t[12]=e=>r.saveQuiz())},{default:l(()=>[u(o(s.saveOrupdate),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(I,{modelValue:s.dialogDelete,"onUpdate:modelValue":t[16]||(t[16]=e=>s.dialogDelete=e),width:"500"},{default:l(()=>[a(k,null,{default:l(()=>[a(M,{class:"text-h5 white--text bg-red"},{default:l(()=>t[25]||(t[25]=[u("Delete")])),_:1,__:[25]}),a(D,{class:"text-h6"},{default:l(()=>[u(" Are you sure to delete("+o(s.selectedOne.name)+")? ",1)]),_:1}),a(A,null,{default:l(()=>[a(S),a(d,{class:"black",text:"",onClick:t[14]||(t[14]=e=>s.dialogDelete=!1)},{default:l(()=>t[26]||(t[26]=[u("CANCEL")])),_:1,__:[26]}),a(d,{dark:"",class:"bg-red",text:"",onClick:t[15]||(t[15]=e=>r.clickDeleteDialog())},{default:l(()=>t[27]||(t[27]=[u("DELETE")])),_:1,__:[27]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Ve=C(j,[["render",ae],["__scopeId","data-v-5f73ff6b"]]);export{Ve as default};
