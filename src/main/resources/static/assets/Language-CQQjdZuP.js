import{s as h}from"./LanguageService-C8OwBagN.js";import{s as b}from"./LessonsService-1oJVq1iE.js";import{_ as C,j as i,a,w as l,e as x,f as V,o as n,d as o,p as r,q as A,g as f,h as u,aw as d,F as T,k as E,B as I,t as g,D as O,m as k,u as L,s as y,c as v,x as D,A as $}from"./index-53ut1aa4.js";import{V as F}from"./VDialog-0H5vlJ4f.js";import{V as M}from"./VTooltip-CbVseJnK.js";import{V as S}from"./VTable-CZhqfiFM.js";import{V as c}from"./VTextField-C3sPCMKT.js";import"./VInput-DLSwO6jY.js";const B={data:()=>({selectedOne:{},language:{amount:0,examFee:0},userData:{},saveOrupdate:"SAVE",languageList:[],dialogDelete:!1,showForm:!1,showTeacher:!1,lessonList:[]}),props:{},mounted:function(){this.userData=JSON.parse(localStorage.getItem("user")),this.userData.role=="TEACHER"?this.showTeacher=!1:this.showTeacher=!0,this.lessonListMethod(),this.languageListMethod(),this.showForm=!1},methods:{saveLanguage:function(){this.language.languagesId,this.language.name,this.language.amount,this.language.examLink,this.language.examFee,this.userData.userId,this.saveOrupdate=="SAVE"?(this.language.userAccountId=this.userData.userId,h.addLanguageList(this.language).then(s=>{this.showForm=!1,this.$swal({icon:"success",title:"Your work saved successfully!",showConfirmButton:!1,timer:1e3}),this.language={languagesId:0,amount:0,examFee:0},this.languageListMethod()})):h.updateLanguage(this.language).then(s=>{this.saveOrupdate="SAVE",this.showForm=!1,this.$swal({icon:"success",title:"Your work updated successfully!",showConfirmButton:!1,timer:1e3}),this.language={languagesId:0,amount:0,examFee:0},this.languageListMethod()})},languageListMethod(){h.getLanguageList().then(s=>{this.languageList.splice(0),this.languageList.push(...s)}).catch(s=>{this.$swal("Fail!",s.response.data.message,"error")})},lessonListMethod(){return b.getLessonList().then(s=>{var e;this.lessonList.splice(0),this.lessonList.push(...s),this.lessonList.length>0?this.language.lessonsDto=this.lessonList[0]:this.language.lessonsDto=null,this.languageListMethod(),this.language.lessonsDto=this.lessonList[0],console.log("LessonsDto now set:",(e=this.language.lessonsDto)==null?void 0:e.userAccountId)}).catch(s=>{console.error("Failed to load lessons:",s)})},clickEdit(s){this.showForm=!0,this.language={...s},this.saveOrupdate="UPDATE"},clickDelete(s){this.selectedOne={...s},this.dialogDelete=!0},clickDeleteDialog(){this.dialogDelete=!1,h.deleteLanguage(this.selectedOne).then(s=>{this.saveOrupdate="SAVE",this.language={},this.languageListMethod(),this.$swal({icon:"success",title:"Your work has been deleted",showConfirmButton:!1,timer:1e3})}).catch(s=>{this.$swal("Fail!",s.response.data.message,"error")})}},watch:{showForm(s){s||(this.language={languagesId:0,amount:0,examFee:0},this.saveOrupdate="SAVE")}},components:{},computed:{isFormValid(){return this.language.name&&this.language.amount&&this.language.examLink&&this.language.examFee}}},N={key:0,class:"text-center white--text bg-primary"},U={key:1,class:"text-center white--text bg-primary"},z=["onClick"],j={class:"text-center"},q={class:"text-center"},Y={key:0,class:"text-start"},_={key:1,class:"text-start"},P={class:"text-center"};function R(s,e,H,J,G,m){return n(),i("div",null,[a(x,{class:"title"},{default:l(()=>[a(V,{cols:"12"},{default:l(()=>[e[17]||(e[17]=o("h2",{style:{"background-color":"rgb(136, 210, 230)","text-align":"center"}},"Languages",-1)),a(M,{location:"top"},{activator:l(({props:t})=>[a(r,A(t,{icon:"",color:"blue",class:"fab-button",onClick:e[0]||(e[0]=p=>s.showForm=!0)}),{default:l(()=>[a(f,{size:"36",color:"white"},{default:l(()=>e[10]||(e[10]=[u("mdi-plus")])),_:1,__:[10]})]),_:2},1040)]),default:l(()=>[e[11]||(e[11]=o("span",null,"Add Language",-1))]),_:1,__:[11]}),a(S,{"fixed-header":"",height:"92vh"},{default:l(()=>[o("thead",null,[o("tr",null,[e[12]||(e[12]=o("th",{class:"text-center white--text bg-primary"},"No.",-1)),e[13]||(e[13]=o("th",{class:"text-center white--text bg-primary"},"Name",-1)),s.showTeacher?(n(),i("th",N,"Amount")):d("",!0),s.showTeacher?(n(),i("th",U,"Exam Fee")):d("",!0),e[14]||(e[14]=o("th",{class:"text-center white--text bg-primary"},"Action",-1))])]),o("tbody",null,[(n(!0),i(T,null,E(s.languageList,(t,p)=>(n(),i("tr",{key:p,onClick:w=>s.selectedOne=t,style:I({backgroundColor:t.languagesId==s.selectedOne.languagesId?"#def3ff":"transparent"})},[o("td",j,g(p+1),1),o("td",q,g(t==null?void 0:t.name),1),s.showTeacher?(n(),i("td",Y,g(t==null?void 0:t.amount),1)):d("",!0),s.showTeacher?(n(),i("td",_,g(t==null?void 0:t.examFee),1)):d("",!0),o("td",P,[a(r,{class:"ml-1",small:"",icon:"",color:"green",density:"compact"},{default:l(()=>[a(f,{size:"small",onClick:w=>m.clickEdit(t)},{default:l(()=>e[15]||(e[15]=[u("mdi-pencil")])),_:2,__:[15]},1032,["onClick"])]),_:2},1024),a(r,{class:"ml-1",small:"",icon:"",color:"red",density:"compact"},{default:l(()=>[a(f,{size:"small",onClick:w=>m.clickDelete(t)},{default:l(()=>e[16]||(e[16]=[u("mdi-delete")])),_:2,__:[16]},1032,["onClick"])]),_:2},1024)])],12,z))),128)),a(O)])]),_:1})]),_:1,__:[17]})]),_:1}),a(F,{modelValue:s.showForm,"onUpdate:modelValue":e[6]||(e[6]=t=>s.showForm=t),"max-width":"500"},{default:l(()=>[a(k,{class:"form pa-4",elevation:"4"},{default:l(()=>[a(L,{class:"d-flex justify-space-between align-center"},{default:l(()=>[e[19]||(e[19]=o("span",{class:"text-h4"},"Add Language",-1)),a(r,{icon:"",color:"red",onClick:e[1]||(e[1]=t=>s.showForm=!1)},{default:l(()=>[a(f,null,{default:l(()=>e[18]||(e[18]=[u("mdi-close")])),_:1,__:[18]})]),_:1})]),_:1,__:[19]}),a(y,null,{default:l(()=>[a(c,{label:"Name",modelValue:s.language.name,"onUpdate:modelValue":e[2]||(e[2]=t=>s.language.name=t),rules:[t=>!!t||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"]),s.showTeacher?(n(),v(c,{key:0,type:"number",label:"Amount",modelValue:s.language.amount,"onUpdate:modelValue":e[3]||(e[3]=t=>s.language.amount=t),modelModifiers:{number:!0},rules:[t=>!!t||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"])):d("",!0),s.showTeacher?(n(),v(c,{key:1,type:"number",label:"Exam Fee",modelValue:s.language.examFee,"onUpdate:modelValue":e[4]||(e[4]=t=>s.language.examFee=t),modelModifiers:{number:!0},density:"compact",variant:"outlined"},null,8,["modelValue"])):d("",!0)]),_:1}),a(D,{class:"justify-end pr-5"},{default:l(()=>[a(r,{class:"text-black",style:{"background-color":"#2196f3"},onClick:e[5]||(e[5]=t=>m.saveLanguage())},{default:l(()=>[u(g(s.saveOrupdate),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(V,null,{default:l(()=>[a(F,{modelValue:s.dialogDelete,"onUpdate:modelValue":e[9]||(e[9]=t=>s.dialogDelete=t),width:"500"},{default:l(()=>[a(k,null,{default:l(()=>[a(L,{class:"text-h5 white--text bg-red"},{default:l(()=>e[20]||(e[20]=[u(" Delete ")])),_:1,__:[20]}),a(y,{class:"text-h6"},{default:l(()=>[u(" Are you sure to delete("+g(s.selectedOne.name)+")? ",1)]),_:1}),a(D,null,{default:l(()=>[a($),a(r,{class:"black",text:"",onClick:e[7]||(e[7]=t=>s.dialogDelete=!1)},{default:l(()=>e[21]||(e[21]=[u(" CANCEL ")])),_:1,__:[21]}),a(r,{dark:"",class:"bg-red",text:"",onClick:e[8]||(e[8]=t=>m.clickDeleteDialog())},{default:l(()=>e[22]||(e[22]=[u(" DELETE ")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}const ae=C(B,[["render",R],["__scopeId","data-v-4eba2608"]]);export{ae as default};
