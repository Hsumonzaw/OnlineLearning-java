import{_ as E,c as O,o as U,w as r,a as l,f,y as q,z as B,h as n,A as P,p as m,g as h,e as b,d as a,j as w,i as x,q as D,F as R,k as z,B as j,t as u,l as H,C as T,D as J,m as v,u as L,s as k,v as Z,x as C}from"./index-53ut1aa4.js";import{s as g}from"./UserAccountService-6cOQmFSE.js";import{_ as Y}from"./PhotoUser-WXFrMJM7.js";/* empty css                                                                    */import{V as F}from"./VDialog-0H5vlJ4f.js";import{V as A}from"./VAutocomplete-CoJCvEhZ.js";import{V as G}from"./VTooltip-CbVseJnK.js";import{V as K}from"./VTable-CZhqfiFM.js";import{V as Q,a as $}from"./VDatePicker-BhS8khmY.js";import{V as p}from"./VTextField-C3sPCMKT.js";import{V as M}from"./VBottomSheet-DvdFTA1z.js";import{f as I}from"./format-CBpsKyOP.js";import"./filter-yAUY_7Fd.js";import"./VInput-DLSwO6jY.js";import"./VSelectionControl-nb06iGDz.js";import"./VChip-CK8SP7y-.js";const W={data:()=>({file:""}),props:{user:Object},mounted:function(){},methods:{saveFile:function(){var s=new FormData;s.append("file",this.$refs.file.files[0]),g.updateFile(s,this.user.userAccountId).then(e=>{this.$emit("loadUserList"),this.$swal({title:"Successful",text:"Success!",type:"success",timer:500})}).catch(e=>{this.$swal("မအောင်မြင်ပါ",e.response.data.message,"error")})},changeFile:function(s){let e=s.target.files[0],i=new FileReader;i.readAsDataURL(e),i.onload=o=>{this.file=o.target.result}}},watch:{},components:{}};function X(s,e,i,o,N,d){return U(),O(b,{"no-gutters":""},{default:r(()=>[l(f,{cols:"12",md:"12"},{default:r(()=>[l(q,{dark:"",color:"primary pl-2 pr-2",density:"compact"},{default:r(()=>[l(B,null,{default:r(()=>e[3]||(e[3]=[n("User CV File")])),_:1,__:[3]}),l(P),l(m,{icon:"",dark:"",onClick:e[0]||(e[0]=V=>s.$emit("closeDialog"))},{default:r(()=>[l(h,null,{default:r(()=>e[4]||(e[4]=[n("mdi-close-circle")])),_:1,__:[4]})]),_:1})]),_:1})]),_:1}),l(f,{cols:"12",md:"12"},{default:r(()=>[l(b,{class:"ml-2"},{default:r(()=>[l(f,{cols:"12",md:"12"},{default:r(()=>[a("input",{type:"file",id:"file",ref:"file",onChange:e[1]||(e[1]=(...V)=>d.changeFile&&d.changeFile(...V))},null,544)]),_:1}),l(f,{cols:"12",md:"12"},{default:r(()=>[l(m,{color:"primary",outlined:"",class:"ml-2",onClick:e[2]||(e[2]=V=>d.saveFile())},{default:r(()=>e[5]||(e[5]=[n("Save")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1})]),_:1})}const _=E(W,[["render",X]]),ee={data:()=>({selectedOne:{},user:{},userList:[],userTypeList:["ALL","STAFF","STUDENT","TEACHER","ADMIN"],saveOrupdate:"SAVE",startPicker:new Date,startMenu:!1,dialogDelete:!1,userPhotoDialog:!1,showForm:!1,loggedInUser:null,UserFileDialog:!1,userType:"ALL",valid:!1,email:"",phone:"",nrc:"",rules:{required:s=>!!s||"This field is required",email:s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||"Invalid email format",phone:s=>/^(?:\+?95|0)(?:9\d{7,9})$/.test(s)||"Invalid Myanmar phone number",nrc:s=>/^\d{1,2}\/[A-Z]{3}\([A-Z]\)\d{6}$/.test(s)||"Invalid NRC format"}}),props:{hideToolbar:Function},mounted:function(){this.loggedInUser=JSON.parse(localStorage.getItem("user")),this.user.startDate=I(this.startPicker,"dd-MM-yyyy"),this.user.userType=this.userTypeList[0],this.userListMethod(),this.showForm=!1,this.userListMethodByType()},methods:{getUserPhotoUrl(s){return s?`${x.defaults.baseURL}/userphoto/${s}.png`:"path/to/default-image.png"},userListMethodByType(){g.getUserList(this.userType).then(s=>{this.userList.splice(0,this.userList.length),this.userList.push(...s),console.log(this.userList),this.saveOrupdate="SAVE"}).catch(s=>{this.$swal("Fail!",s.response.data.message,"error")})},FileMethod:function(s){this.selectedOne=s,this.showForm=!1,this.UserFileDialog=!0},loadUserList:function(){this.userPhotoDialog=!1,this.userListMethod(),this.userFileDialog=!1,this.showForm=!1},photoMethod:function(s){this.userPhotoDialog=!0},clickDeleteDialog:function(s){var e;this.dialogDelete=!1,g.deleteUser((e=this.selectedOne)==null?void 0:e.userAccountId).then(i=>{this.saveOrupdate="SAVE",this.user={},this.userListMethod(),this.userListMethodByType(),this.$swal({icon:"success",title:"Your work has been deleted",showConfirmButton:!1,timer:1e3})}).catch(i=>{this.$swal("Fail!",i.response.data.message,"error")})},deleteUserMethod:function(s){this.selectedOne=s,this.dialogDelete=!0},editUser:function(s){this.showForm=!0,this.saveOrupdate="UPDATE",this.user=Object.assign({},s)},formatDate(s){const[e,i,o]=s.split("-");return`${o}-${i}-${e}`},async saveUser(){var s,e,i;try{let o=this.user.userType;typeof o=="object"&&(o=o.userType||o.value||""),this.user.userType=o,((s=this.loggedInUser)==null?void 0:s.role)==="TEACHER"&&o==="STUDENT"?this.user.teacherId=this.loggedInUser.userId:this.user.teacherId=0,this.saveOrupdate==="SAVE"?(this.userListMethodByType(),await g.addUser(this.user),this.$swal({icon:"success",title:"User saved successfully!",showConfirmButton:!1,timer:1e3})):(await g.updateUser(this.user),this.userListMethodByType(),this.$swal({icon:"success",title:"User updated successfully!",showConfirmButton:!1,timer:1e3})),this.user={},this.saveOrupdate="SAVE",this.showForm=!1,this.userListMethod()}catch(o){console.error("User save failed",o),this.$swal("Error",((i=(e=o.response)==null?void 0:e.data)==null?void 0:i.message)||"Failed to save user","error")}},userListMethod(){g.getUserList().then(s=>{var i;const e=s.data||s;this.loggedInUser=JSON.parse(localStorage.getItem("user")),((i=this.loggedInUser)==null?void 0:i.role)==="TEACHER"?this.userList=e.filter(o=>o.userType==="STUDENT"&&o.teacherId===this.loggedInUser.userId):this.userList=e})}},watch:{startPicker(){this.startMenu=!1,this.user.startDate=I(this.startPicker,"dd-MM-yyyy")},showForm(s){s||(this.user={},this.saveOrupdate="SAVE")}},components:{}},se=["onClick"],te={class:"text-center"},le={class:"text-center"},re={class:"text-center"},ae={class:"text-center"},oe={class:"text-center"},ie={class:"text-center"},de={class:"text-center"},ue={class:"text-start"},ne={class:"text-start"},me={class:"text-start"},pe={class:"text-center"},fe={class:"text-center"},he={class:"text-center"},ge={class:"text-center"};function Ve(s,e,i,o,N,d){const V=Y,S=_;return U(),w("div",null,[l(b,{class:"title"},{default:r(()=>[l(f,{cols:"12"},{default:r(()=>[e[32]||(e[32]=a("h2",{style:{"background-color":"rgb(136, 210, 230)","text-align":"center"}}," User Informations ",-1)),l(f,{cols:"2",class:"pl-1 pt-2"},{default:r(()=>[l(A,{modelValue:s.userType,"onUpdate:modelValue":[e[0]||(e[0]=t=>s.userType=t),d.userListMethodByType],"item-text":"userTypeName",items:s.userTypeList,name:"userType",label:"User Type","return-object":"",density:"compact",variant:"outlined",required:"",small:"",filled:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),l(G,{location:"top"},{activator:r(({props:t})=>[l(m,D(t,{icon:"",color:"blue",class:"fab-button",onClick:e[1]||(e[1]=y=>s.showForm=!0)}),{default:r(()=>[l(h,{size:"36",color:"white"},{default:r(()=>e[25]||(e[25]=[n("mdi-plus")])),_:1,__:[25]})]),_:2},1040)]),default:r(()=>[e[26]||(e[26]=a("span",null,"Add User",-1))]),_:1,__:[26]}),l(K,{"fixed-header":"",height:"92vh"},{default:r(()=>[e[31]||(e[31]=a("thead",null,[a("tr",null,[a("th",{class:"text-center white--text bg-primary"},"No."),a("th",{class:"text-center white--text bg-primary"},"StartDate"),a("th",{class:"text-center white--text bg-primary"},"Name"),a("th",{class:"text-center white--text bg-primary"},"UserName"),a("th",{class:"text-center white--text bg-primary"},"Age"),a("th",{class:"text-center white--text bg-primary"},"NRC"),a("th",{class:"text-center white--text bg-primary"},"Email"),a("th",{class:"text-center white--text bg-primary"},"Phone"),a("th",{class:"text-center white--text bg-primary"},"Address"),a("th",{class:"text-center white--text bg-primary"},"UserType"),a("th",{class:"text-center white--text bg-primary"},"Photo"),a("th",{class:"text-center white--text bg-primary"},"Degree"),a("th",{class:"text-center white--text bg-primary"},"File"),a("th",{class:"text-center white--text bg-primary"},"Action")])],-1)),a("tbody",null,[(U(!0),w(R,null,z(s.userList,(t,y)=>(U(),w("tr",{key:y,onClick:c=>s.selectedOne=t,style:j({backgroundColor:t.userAccountId==s.selectedOne.userAccountId?"#def3ff":"transparent"})},[a("td",te,u(y+1),1),a("td",le,u(t.startDate),1),a("td",re,u(t.name),1),a("td",ae,u(t.userName),1),a("td",oe,u(t.age||"-"),1),a("td",ie,u(t.nrc||"-"),1),a("td",de,u(t.email||"-"),1),a("td",ue,u(t.phonenum||"-"),1),a("td",ne,u(t.address||"-"),1),a("td",me,u(t.userType),1),a("td",pe,[l(H,{src:d.getUserPhotoUrl(t.photo),alt:"People Photo","max-width":"80","max-height":"80",contain:"",loading:"lazy"},null,8,["src"])]),a("td",fe,u(t.degree),1),a("td",he,u(t.file),1),a("td",ge,[l(m,{class:"ml-1",small:"",icon:"",color:"black",density:"compact"},{default:r(()=>[l(h,{size:"small",onClick:c=>d.FileMethod(t)},{default:r(()=>e[27]||(e[27]=[n("mdi-file")])),_:2,__:[27]},1032,["onClick"])]),_:2},1024),l(m,{class:"ml-1",small:"",icon:"",color:"black",density:"compact"},{default:r(()=>[l(h,{size:"small",onClick:c=>d.photoMethod(t)},{default:r(()=>e[28]||(e[28]=[n("mdi-image")])),_:2,__:[28]},1032,["onClick"])]),_:2},1024),l(m,{class:"ml-1",small:"",icon:"",color:"green",density:"compact",onClick:T(c=>d.editUser(t),["stop"])},{default:r(()=>[l(h,{size:"small"},{default:r(()=>e[29]||(e[29]=[n("mdi-pencil")])),_:1,__:[29]})]),_:2},1032,["onClick"]),l(m,{class:"ml-1",small:"",icon:"",color:"red",density:"compact",onClick:T(c=>d.deleteUserMethod(t),["stop"])},{default:r(()=>[l(h,{size:"small"},{default:r(()=>e[30]||(e[30]=[n("mdi-delete")])),_:1,__:[30]})]),_:2},1032,["onClick"])])],12,se))),128)),l(J)])]),_:1,__:[31]})]),_:1,__:[32]})]),_:1}),l(F,{modelValue:s.showForm,"onUpdate:modelValue":e[17]||(e[17]=t=>s.showForm=t),"max-width":"600",style:{height:"730px"}},{default:r(()=>[l(v,{class:"form pa-1",elevation:"4","mb-0":""},{default:r(()=>[l(L,{class:"d-flex justify-space-between align-center"},{default:r(()=>[e[34]||(e[34]=a("span",{class:"text-h4"},"Add User",-1)),l(m,{icon:"",color:"red",onClick:e[2]||(e[2]=t=>s.showForm=!1)},{default:r(()=>[l(h,null,{default:r(()=>e[33]||(e[33]=[n("mdi-close")])),_:1,__:[33]})]),_:1})]),_:1,__:[34]}),l(k,null,{default:r(()=>[l(Z,{modelValue:s.startMenu,"onUpdate:modelValue":e[5]||(e[5]=t=>s.startMenu=t),"full-width":"","max-width":"200px","min-width":"290px","close-on-content-click":!1},{activator:r(({props:t})=>[l(p,D({modelValue:s.user.startDate,"onUpdate:modelValue":e[3]||(e[3]=y=>s.user.startDate=y),density:"compact",variant:"outlined",label:"From Date",readonly:""},t),null,16,["modelValue"])]),default:r(()=>[l(Q,{modelValue:s.startPicker,"onUpdate:modelValue":e[4]||(e[4]=t=>s.startPicker=t),color:"primary","hide-header":""},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(p,{label:"Name",modelValue:s.user.name,"onUpdate:modelValue":e[6]||(e[6]=t=>s.user.name=t),rules:[t=>!!t||"required"]},null,8,["modelValue","rules"]),l(p,{label:"User Name",modelValue:s.user.userName,"onUpdate:modelValue":e[7]||(e[7]=t=>s.user.userName=t),rules:[t=>!!t||"required"]},null,8,["modelValue","rules"]),l(p,{label:"Age",modelValue:s.user.age,"onUpdate:modelValue":e[8]||(e[8]=t=>s.user.age=t),rules:[t=>!!t||"required"]},null,8,["modelValue","rules"]),l(p,{modelValue:s.user.nrc,"onUpdate:modelValue":e[9]||(e[9]=t=>s.user.nrc=t),label:"NRC",rules:[s.rules.required,s.rules.nrc],required:""},null,8,["modelValue","rules"]),l(p,{modelValue:s.user.email,"onUpdate:modelValue":e[10]||(e[10]=t=>s.user.email=t),label:"Email",rules:[s.rules.required,s.rules.email],required:""},null,8,["modelValue","rules"]),l(p,{label:"Password",modelValue:s.user.password,"onUpdate:modelValue":e[11]||(e[11]=t=>s.user.password=t),rules:[t=>!!t||"required"]},null,8,["modelValue","rules"]),l(p,{modelValue:s.user.phonenum,"onUpdate:modelValue":e[12]||(e[12]=t=>s.user.phonenum=t),label:"Phone Number",rules:[s.rules.required,s.rules.phone],required:""},null,8,["modelValue","rules"]),l(p,{label:"Address",modelValue:s.user.address,"onUpdate:modelValue":e[13]||(e[13]=t=>s.user.address=t)},null,8,["modelValue"]),l(A,{modelValue:s.user.userType,"onUpdate:modelValue":e[14]||(e[14]=t=>s.user.userType=t),items:s.userTypeList,label:"UserType",required:"",density:"compact",variant:"outlined",filled:""},null,8,["modelValue","items"]),l(p,{label:"Degree",modelValue:s.user.degree,"onUpdate:modelValue":e[15]||(e[15]=t=>s.user.degree=t),rules:[t=>!!t||"required"]},null,8,["modelValue","rules"])]),_:1}),l(C,{class:"justify-end pr-5"},{default:r(()=>[l(m,{class:"text-black",style:{"background-color":"#2196f3"},onClick:e[16]||(e[16]=t=>d.saveUser())},{default:r(()=>[n(u(s.saveOrupdate),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(F,{modelValue:s.dialogDelete,"onUpdate:modelValue":e[20]||(e[20]=t=>s.dialogDelete=t),width:"500"},{default:r(()=>[l(v,null,{default:r(()=>[l(L,{class:"text-h5 white--text bg-red"},{default:r(()=>e[35]||(e[35]=[n("Delete")])),_:1,__:[35]}),l(k,{class:"text-h6"},{default:r(()=>[n(" Are you sure to delete("+u(s.selectedOne.name)+")? ",1)]),_:1}),l(C,null,{default:r(()=>[l(P),l(m,{class:"black",text:"",onClick:e[18]||(e[18]=t=>s.dialogDelete=!1)},{default:r(()=>e[36]||(e[36]=[n("CANCEL")])),_:1,__:[36]}),l(m,{dark:"",class:"bg-red",text:"",onClick:e[19]||(e[19]=t=>d.clickDeleteDialog())},{default:r(()=>e[37]||(e[37]=[n("DELETE")])),_:1,__:[37]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(f,null,{default:r(()=>[l(M,{modelValue:s.userPhotoDialog,"onUpdate:modelValue":e[22]||(e[22]=t=>s.userPhotoDialog=t),fullscreen:"",scrollable:""},{default:r(()=>[l($,{class:"information-window-v-sheet"},{default:r(()=>[l(V,{onCloseDialog:e[21]||(e[21]=t=>s.userPhotoDialog=!1),user:s.selectedOne,onLoadUserList:d.loadUserList},null,8,["user","onLoadUserList"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(f,null,{default:r(()=>[l(M,{modelValue:s.UserFileDialog,"onUpdate:modelValue":e[24]||(e[24]=t=>s.UserFileDialog=t),fullscreen:"",scrollable:""},{default:r(()=>[l($,{class:"information-window-v-sheet"},{default:r(()=>[l(S,{onCloseDialog:e[23]||(e[23]=t=>s.UserFileDialog=!1),user:s.selectedOne,onLoadUserList:d.loadUserList},null,8,["user","onLoadUserList"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}const Ee=E(ee,[["render",Ve],["__scopeId","data-v-93155c5e"]]);export{Ee as default};
