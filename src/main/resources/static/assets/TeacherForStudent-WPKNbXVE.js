import{s as g}from"./UserAccountService-6cOQmFSE.js";import{s as f}from"./LanguageService-C8OwBagN.js";import{_ as p,j as i,a as r,w as n,e as m,o as l,f as _,d as s,F as L,k as w,B as y,t as d,D}from"./index-53ut1aa4.js";import{V as v}from"./VTooltip-CbVseJnK.js";import{V as S}from"./VTable-CZhqfiFM.js";import{f as x}from"./format-CBpsKyOP.js";const F={data:()=>({selectedOne:{},student:{},userData:{},saveOrupdate:"SAVE",studentList:[],dialogDelete:!1,showForm:!1,showTeacher:!1,languageList:[]}),props:{},mounted:function(){this.userData=JSON.parse(localStorage.getItem("user")),this.userData.role=="TEACHER"?this.showTeacher=!1:this.showTeacher=!0,this.userData.role==="TEACHER"?(this.showTeacher=!1,this.studentListMethod()):(this.showTeacher=!0,this.loadStudents()),this.showForm=!1,this.loadLanguages()},methods:{studentListMethod(){g.getStudentsForTeacher().then(t=>{console.log("Raw teacher-student list:",t);const e=t.filter(a=>a.studentDto&&a.languagesDto);this.studentList.splice(0),this.studentList.push(...e)}).catch(t=>{var e,a;this.$swal("Fail!",((a=(e=t.response)==null?void 0:e.data)==null?void 0:a.message)||"Fetch error","error")})},loadLanguages(){f.getLanguageList().then(t=>{this.languageList.splice(0),this.languageList.push(...t),this.student.languagesDto=this.languageList[0]}).catch(t=>console.error("Fetch error:",t))},loadStudents(){g.getUserList().then(t=>{this.studentList.splice(0),this.studentList.push(...t)}).catch(t=>console.error("Fetch error:",t))}},watch:{receivedPicker(){this.receivedMenu=!1,this.student.receivedDate=x(this.receivedPicker,"dd-MM-yyyy")},showForm(t){t||(this.student={},this.saveOrupdate="SAVE")}},components:{}},T=["onClick"],V={class:"text-center"},k={class:"text-center"},b={class:"text-start"};function C(t,e,a,E,$,M){return l(),i("div",null,[r(m,{class:"title"},{default:n(()=>[r(_,{cols:"12"},{default:n(()=>[e[2]||(e[2]=s("h2",{style:{"background-color":"rgb(136, 210, 230)","text-align":"center"}},"My Students",-1)),r(v,{location:"top"},{default:n(()=>e[0]||(e[0]=[s("span",null,"Add Student",-1)])),_:1,__:[0]}),r(S,{"fixed-header":"",height:"92vh"},{default:n(()=>[e[1]||(e[1]=s("thead",null,[s("tr",null,[s("th",{class:"text-center white--text bg-primary"},"No."),s("th",{class:"text-center white--text bg-primary"},"Language Name"),s("th",{class:"text-center white--text bg-primary"},"Student Name")])],-1)),s("tbody",null,[(l(!0),i(L,null,w(t.studentList,(o,h)=>{var u,c;return l(),i("tr",{key:h,onClick:N=>t.selectedOne=o,style:y({backgroundColor:o.lessonsId==t.selectedOne.lessonsId?"#def3ff":"transparent"})},[s("td",V,d(h+1),1),s("td",k,d((u=o.languagesDto)==null?void 0:u.name),1),s("td",b,d((c=o.studentDto)==null?void 0:c.name),1)],12,T)}),128)),r(D)])]),_:1,__:[1]})]),_:1,__:[2]})]),_:1})])}const P=p(F,[["render",C],["__scopeId","data-v-0713a7ba"]]);export{P as default};
